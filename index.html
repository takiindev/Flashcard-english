<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0"> 
<title>Flashcard IELTS Responsive Tối Ưu</title>
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
<style>
    /* ----------------------------------- */
    /* THÊM: box-sizing: border-box CHO TẤT CẢ PHẦN TỬ */
    /* ----------------------------------- */
    *,
    *::before,
    *::after {
        box-sizing: border-box;
        outline: none;
    }
    
    /* ----------------------------------- */
    /* CSS CHUNG */
    /* ----------------------------------- */
    body {
        font-family: 'Roboto', sans-serif;
        background: #e9ecef; 
        min-height: 100vh;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        padding: 20px;
        margin: 0;
    }

    /* Vấn đề lật thẻ: Đặt perspective lên container cha để tránh lỗi tràn */
    .card-container {
        /* Đặt kích thước cố định để perspective hoạt động tốt */
        width: 350px; 
        height: 220px; 
        perspective: 1000px; /* Perspective (Góc nhìn 3D) */
        margin-bottom: 40px;
    }
    .card {
        width: 100%;
        height: 100%;
        cursor: pointer;
    }
    
    .inner {
        width: 100%;
        height: 100%;
        transition: transform 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275); 
        transform-style: preserve-3d;
        position: relative;
        box-shadow: 0 10px 20px rgba(0, 0, 0, 0.15); 
        border-radius: 15px; 
    }
    .card-container:hover .inner { /* Thay đổi: Dùng card-container cho hover */
        box-shadow: 0 15px 30px rgba(0, 0, 0, 0.2); 
    }
    .card.clicked .inner {
        transform: rotateY(180deg);
        box-shadow: 0 15px 30px rgba(0, 0, 0, 0.2);
    }

    /* Mặt trước và mặt sau */
    .side {
        position: absolute;
        width: 100%;
        height: 100%;
        backface-visibility: hidden;
        border-radius: 15px;
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 24px;
        padding: 25px;
        text-align: center; 
        font-weight: 700; 
        color: #343a40; 
        border: 1px solid rgba(0, 0, 0, 0.05);
    }
    .front { 
        background: #ffffff; 
        color: #007bff; 
    }
    .back { 
        background: #f8f9fa; 
        transform: rotateY(180deg); 
        color: #28a745; 
    }

    /* Nút */
    button {
        padding: 14px 30px; 
        border: none;
        background: #007bff; 
        color: white;
        border-radius: 50px; 
        font-size: 19px; 
        font-weight: 700;
        cursor: pointer;
        transition: background-color 0.3s, transform 0.1s;
        box-shadow: 0 4px 6px rgba(0, 123, 255, 0.3);
    }
    button:hover {
        background: #0056b3; 
        transform: translateY(-2px);
        box-shadow: 0 6px 10px rgba(0, 123, 255, 0.4);
    }
    button:active {
        transform: translateY(0);
        box-shadow: 0 4px 6px rgba(0, 123, 255, 0.3);
    }
    
    /* ----------------------------------- */
    /* MEDIA QUERY CHO THIẾT BỊ DI ĐỘNG (DƯỚI 600px) */
    /* ----------------------------------- */
    @media (max-width: 600px) {
        .card-container {
            width: 90vw; 
            max-width: 350px; 
            height: 60vw; 
            perspective: 120vw; 
        }
        
        .side {
            font-size: 20px;
            padding: 15px;
        }
        
        button {
            padding: 12px 25px;
            font-size: 17px;
        }
    }

</style>
</head>

<body>
<div class="card-container">
    <div class="card" onclick="flipCard()">
        <div class="inner">
            <div class="side front" id="vn">Đang tải...</div>
            <div class="side back" id="en">Loading...</div>
        </div>
    </div>
</div>

<button onclick="nextWord()">Từ tiếp theo</button>

<script>
let words = []; // Khai báo mảng global để lưu trữ từ vựng
let i = 0;

function shuffle(array) {
    for (let i = array.length - 1; i > 0; i--) {
        let j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
    }
    return array;
}

function loadWord() {
    if (words.length === 0) {
        document.getElementById("vn").textContent = "Không tìm thấy từ vựng.";
        document.getElementById("en").textContent = "No words found.";
        return;
    }
    document.getElementById("vn").textContent = words[i].vn;
    document.getElementById("en").textContent = words[i].en;
    document.querySelector(".card").classList.remove("clicked");
}

function flipCard() {
    document.querySelector(".card").classList.toggle("clicked");
}

function nextWord() {
    i = (i + 1) % words.length;
    loadWord();
}

// --- THAY ĐỔI LỚN: LOAD DỮ LIỆU TỪ JSON ---
async function loadWordsFromJSON() {
    try {
        // Tải file words.json cùng thư mục
        const response = await fetch('words.json'); 
        
        if (!response.ok) {
            throw new Error(`Lỗi tải file JSON: ${response.statusText}`);
        }

        const data = await response.json();
        
        // Gán dữ liệu vào biến words global, sau đó trộn và hiển thị
        words = shuffle(data);
        loadWord();

    } catch (error) {
        console.error("Lỗi khi tải từ vựng:", error);
        document.getElementById("vn").textContent = "Lỗi khi tải dữ liệu.";
        document.getElementById("en").textContent = "Kiểm tra file words.json";
    }
}

// Bắt đầu quá trình tải khi trang được load
loadWordsFromJSON();
</script>

</body>
</html>
